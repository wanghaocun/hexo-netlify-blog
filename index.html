<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://filein.oss-cn-hangzhou.aliyuncs.com/chaos/one/favicon.png"><link rel="icon" type="image/png" href="https://filein.oss-cn-hangzhou.aliyuncs.com/chaos/one/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="记录总结工作生活喜怒哀乐"><meta name="author" content="王浩存"><meta name="keywords" content="开发,技术,docker,java,python"><title>王浩存的博客</title><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.10.2/css/all.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/mdbootstrap/4.8.9/css/mdb.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/3.0.1/github-markdown.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css"><link rel="stylesheet" href="/lib/prettify/github-v2.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><meta name="generator" content="Hexo 4.2.0"></head><body><header style="height:100vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>亂一</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/">首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/">归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/">分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/">标签</a></li><li class="nav-item"><a class="nav-link" href="/about/">关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i class="iconfont icon-search"></i>&nbsp;&nbsp;</a></li></ul></div></div></nav><div class="view intro-2" id="background" style="background:url(https://filein.oss-cn-hangzhou.aliyuncs.com/chaos/one/home.jpg) no-repeat center center;background-size:cover;background-attachment:fixed"><div class="full-bg-img"><div class="mask rgba-black-light flex-center"><div class="container text-center white-text fadeInUp"><span class="h2" id="subtitle"></span></div><div class="scroll-down-bar"><i class="fas fa-angle-down scroll-down-arrow"></i></div></div></div></div></header><main><div class="container nopadding-md"><div class="py-5 z-depth-3" id="board"><div class="container"><div class="row"><div class="col-12 col-md-10 m-auto"><div class="row mb-4 mx-auto"><div class="col-12 col-md-4 m-auto"><a href="/posts/docker-container-misc/" target="_self"><img src="https://filein.oss-cn-hangzhou.aliyuncs.com/chaos/one/docker-logo.png" srcset="/img/loading.gif" alt="Docker Container Misc" class="img-fluid rounded z-depth-3 index-thumbnails"></a></div><div class="col-12 col-md-8 m-auto"><a href="/posts/docker-container-misc/"><p class="h4 index-header">Docker Container Misc</p><div class="index-excerpt"><div class="index-text mb-1">docker memotime zone issue参考笔记 《Docker 时区调整方案》Dockerfile构建重写... RUN mkdir -p /some/path \ &amp;&amp; chmod 777 /some/path \ ============================================================== &amp;&amp; rm -rf /etc/localtime \ &amp;&amp; /bin/cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \ &amp;&amp; echo &#39;Asia/Shanghai&#39; &gt;/etc/timezone ============================================================== ...run 加环境变量 -e TZ（并非所有容器都生效）```shdocker run … \e TZ=Asia/Shanghai \…manual</div></div></a><div><i class="iconfont icon-riqi2"></i>&nbsp;2020-09-03&nbsp;&nbsp; <i class="iconfont icon-tag"></i> <a href="/tags/docker">docker</a>&nbsp; <a href="/tags/tech">tech</a>&nbsp;</div></div></div><div class="row mb-4 mx-auto"><div class="col-12 col-md-4 m-auto"><a href="/posts/hello-world/" target="_self"><img src="https://filein.oss-cn-hangzhou.aliyuncs.com/chaos/one/article.png" srcset="/img/loading.gif" alt="Hello World" class="img-fluid rounded z-depth-3 index-thumbnails"></a></div><div class="col-12 col-md-8 m-auto"><a href="/posts/hello-world/"><p class="h4 index-header">Hello World</p><div class="index-excerpt"><div class="index-text mb-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.Quick StartCreate a new post$ hexo new &quot;My New Post&quot;More info: WritingRun server$ hexo serverMore info: ServerGenerate static files$ hexo generateMore info: GeneratingDeploy to remote sites$ hexo deployMore info: Deployment</div></div></a><div><i class="iconfont icon-riqi2"></i>&nbsp;2020-09-03&nbsp;&nbsp;</div></div></div><div class="row mb-4 mx-auto"><div class="col-12 col-md-4 m-auto"><a href="/posts/1578583262/" target="_self"><img src="https://filein.oss-cn-hangzhou.aliyuncs.com/chaos/one/article.png" srcset="/img/loading.gif" alt="No Route to Host (Host Unreachable)问题" class="img-fluid rounded z-depth-3 index-thumbnails"></a></div><div class="col-12 col-md-8 m-auto"><a href="/posts/1578583262/"><p class="h4 index-header">No Route to Host (Host Unreachable)问题</p><div class="index-excerpt"><div class="index-text mb-1">问题描述基于Docker搭建的项目生产环境，在阿里云ECS上访问所有开放端口的API均正常使用。但是在客户现场部署于内网生产环境时，总有一个API执行失败。这个API也比较特殊，使用流程图说明：graph LR; A[Client] --&gt;|1.Request API| B(Server); B --&gt;|6.Response API| A; B --&gt;|2.Send API| C{API Gateway}; C --&gt;|5.Receive API| B; C --&gt;|3.Send Topic| D[Remote Machine]; D --&gt;|4.Response Topic| C;整个流程属于一个大的内网环境（禁止外部访问），其中Client/Server/API Gateway同属于一个内网服务器，Remote Machine属于远程设备。内网环境存在一层防火墙，限制这台内网服务器与远程设备的通信，仅开放了一个的端口进行远程通信。所有直来直去的API均可以正常工作，只有一个获取远程设备图片并读取图片然后BASE64编码后返回给客户端的API一直报</div></div></a><div><i class="iconfont icon-riqi2"></i>&nbsp;2020-01-09&nbsp;&nbsp; <i class="iconfont icon-inbox"></i> <a href="/categories/Summary">Summary</a>&nbsp; &nbsp; <i class="iconfont icon-tag"></i> <a href="/tags/Network">Network</a>&nbsp; <a href="/tags/Firewall">Firewall</a>&nbsp; <a href="/tags/Linux">Linux</a>&nbsp; <a href="/tags/CentOS7">CentOS7</a>&nbsp; <a href="/tags/Java">Java</a>&nbsp;</div></div></div><div class="row mb-4 mx-auto"><div class="col-12 col-md-4 m-auto"><a href="/posts/1577809488/" target="_self"><img src="https://filein.oss-cn-hangzhou.aliyuncs.com/chaos/one/docker-logo.png" srcset="/img/loading.gif" alt="Docker-Misc" class="img-fluid rounded z-depth-3 index-thumbnails"></a></div><div class="col-12 col-md-8 m-auto"><a href="/posts/1577809488/"><p class="h4 index-header">Docker-Misc</p><div class="index-excerpt"><div class="index-text mb-1">Docker 札记复制文件# 复制docker文件到宿主机 docker cp mycontainer:/opt/file.txt /opt/local/ # 复制宿主机文件到docker docker cp /opt/local/file.txt mycontainer:/opt/帮助想查看在创建容器时有哪些可用的选项，可以执行：docker run -it --rm image:tag --verbose --help清理清理所有停止运行的容器：docker container prune # or docker rm $(docker ps -aq)清理所有悬挂（``）镜像：docker image prune # or docker rmi $(docker images -qf &quot;dangling=true&quot;)清理所有无用数据卷：docker volume prune由于prune操作是批量删除类的危险操作，所以会有一次确认。 如果不想输入y来确认，可以添加-f操作。慎用！清理停止的容器docker rm -lv CONTAINER-l是清理link，v是</div></div></a><div><i class="iconfont icon-riqi2"></i>&nbsp;2019-12-31&nbsp;&nbsp; <i class="iconfont icon-inbox"></i> <a href="/categories/DDDD">DDDD</a>&nbsp; &nbsp; <i class="iconfont icon-tag"></i> <a href="/tags/docker">docker</a>&nbsp; <a href="/tags/tech">tech</a>&nbsp;</div></div></div></div></div></div></div></div></main><a class="z-depth-1" id="scroll-top-button" href="#" role="button"><i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><footer class="mt-5"><div class="text-center py-3"><i class="far fa-copyright" title="版权"></i> <b>2020</b>&nbsp;&nbsp; &nbsp;<i class="fas fa-pencil-alt" title="博主"></i> <a href="https://wanghaocun.com" target="_blank" rel="nofollow noopener"><b>王浩存</b></a><br><span id="busuanzi_container_site_pv"><i class="far fa-eye" title="总访问量"></i>&nbsp;<b><span id="busuanzi_value_site_pv"></span> 次</b></span>&nbsp; &nbsp;<span id="busuanzi_container_site_uv"> <i class="fas fa-user-tie" title="总访客数"></i>&nbsp;<b><span id="busuanzi_value_site_uv"></span> 人</b></span><br></div></footer><script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script><script src="https://cdn.staticfile.org/mdbootstrap/4.8.9/js/mdb.min.js"></script><script src="/js/main.js"></script><script src="/js/lazyload.js"></script><script src="https://cdn.staticfile.org/smooth-scroll/16.1.0/smooth-scroll.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?290f5b0c71bf2d000c4fd30f6ad98f3d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-155172559-1","auto"),ga("send","pageview")</script><script src="https://cdn.staticfile.org/prettify/r298/prettify.min.js"></script><script>$(document).ready(function(){$("pre").addClass("prettyprint  linenums"),prettyPrint()})</script><script src="https://cdn.staticfile.org/typed.js/2.0.10/typed.min.js"></script><script>var typed=new Typed("#subtitle",{strings:["  ","人无远虑，必有近忧&nbsp;"],cursorChar:"_",typeSpeed:70,loop:!1});typed.stop(),$(document).ready(function(){$(".typed-cursor").addClass("h2"),typed.start()})</script><script src="https://cdn.staticfile.org/anchor-js/4.2.0/anchor.min.js"></script><script>anchors.options = {
      placement: "left",
      visible: "false",
      
      icon: "§"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))</script><script src="/js/local-search.js"></script><script>var path="/local-search.xml",inputArea=document.querySelector("#local-search-input");inputArea.onclick=function(){getSearchFile(path),this.onclick=null}</script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><script>$("#post img:not(.no-zoom img, img[no-zoom])").each(function(){var t=document.createElement("a");$(t).attr("data-fancybox","images"),$(t).attr("href",$(this).attr("src")),$(this).wrap(t)})</script><script type="text/javascript">var a_idx=0;jQuery(document).ready(function(d){d("body").click(function(a){var o=new Array("富强","民主","文明","和谐","自由","平等","公正","法治","爱国","敬业","诚信","友善"),t=d("<span/>").text(o[a_idx]);a_idx=(a_idx+1)%o.length;var n=a.pageX,e=a.pageY;t.css({"z-index":999,top:e-20,left:n,position:"absolute","font-weight":"bold",color:"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}),d("body").append(t),t.animate({top:e-180,opacity:0},1500,function(){t.remove()})})})</script></body></html>